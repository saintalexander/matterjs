<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Luzi Type Foundry</title>
    <meta name="description" content="Luzi Type is a Swiss type foundry with an innovative catalogue of sophisticated fonts.">
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="icon" href="/image/favicons/favicon.svg" type="image/svg+xml">
    <link rel="stylesheet" href="css/style.css">   
    <script>
    !function(){const e="dark"===localStorage.getItem("theme");document.documentElement.classList.toggle("dark-theme",e),document.addEventListener("DOMContentLoaded",function(){document.querySelector(".btn-toggle").addEventListener("click",function(){localStorage.setItem("theme",document.documentElement.classList.toggle("dark-theme")?"dark":"light")})})}();
    </script>
    <style>
        html.dark-theme body {--bkg:#fff;--text:#000;background:var(--bkg);color:var(--text)}
        @media only screen and (max-width: 800px){#fontsbundel{margin-top:-400px}}    
        @media only screen and (min-width: 800px){#fontsbundel{margin-top:-9vw}}    
    </style>
</head>
<body>    
    <div id="menu">
        <!-- Navigation and other content here -->
    </div>

    <div id="fontsbundel"></div> <!-- Canvas will be here -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script>
    // Matter.js module aliases
    const { Engine, Render, World, Bodies, Mouse, MouseConstraint, Composites, Events } = Matter;

    // Create engine
    const engine = Engine.create();
    const world = engine.world;

    // Setup the renderer
    const render = Render.create({
        element: document.getElementById('fontsbundel'), // Attach to HTML element
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false,
            background: 'transparent'
        }
    });

    // Create mouse control
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: {
            render: { visible: false }
        }
    });
    World.add(world, mouseConstraint);

    // Function to shuffle image URLs
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Load and shuffle images
    const imageUrls = [
        "images/sticker-1.png",
        "images/sticker-2.png",
        "images/sticker-3.png",
        "images/sticker-4.png",
        "images/sticker-5.png",
        "images/sticker-6.png",
        "images/sticker-7.png",
        "images/sticker-8.png",
        "images/sticker-9.png",
        "images/sticker-10.png"
    ];
    
    let currentImageIndex = 0;
    let shuffledImageUrls = shuffleArray([...imageUrls]);

    // Create bodies with images
    function createSmiley(x, y) {
        if (currentImageIndex >= shuffledImageUrls.length) {
            currentImageIndex = 0;
            shuffledImageUrls = shuffleArray([...imageUrls]);
        }
        let options = {
            render: {
                sprite: {
                    texture: shuffledImageUrls[currentImageIndex++],
                    xScale: 0.4,
                    yScale: 0.4
                }
            }
        };
        return Bodies.circle(x, y, 50, options);
    }

    // Add bodies to the world
    const smileys = Composites.stack(100, 100, 5, 5, 50, 50, createSmiley);
    World.add(world, smileys);

    // Run the engine and renderer
    Engine.run(engine);
    Render.run(render);

    // Function to update canvas dimensions and bodies dynamically
    function updateCanvasSize() {
        // Get the new width and height based on the current window size
        const newWidth = window.innerWidth;
        const newHeight = window.innerHeight;

        // Update render size
        render.options.width = newWidth;
        render.options.height = newHeight;

        // Update canvas dimensions directly
        render.canvas.width = newWidth;
        render.canvas.height = newHeight;
    }

    // Listen for window resize and update the canvas accordingly
    window.addEventListener('resize', updateCanvasSize);
    </script>
</body>
</html>
